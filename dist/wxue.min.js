"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@vue/reactivity");function t(){}function n(e){return e&&"function"==typeof e}function o(e){return e&&"object"==typeof e}function r(e){return Array.isArray(e)}function u(e,t){r(e)?e.forEach(t):o(e)&&Object.keys(e).forEach(n=>{t(e[n],n)})}const s=new class{constructor(){this.queue=[]}push(e){this.queue.push(e)}run(e){for(;this.queue.length;)e(this.queue.shift())}isNull(){return 0===this.queue.length}};let i=null,f=null;function c(e,t){s.push(t),f&&(clearTimeout(f),f=null),f=setTimeout(()=>{if(s.isNull())return;let t={};s.run(e=>{t={...t,...e}}),e.setData(t,()=>{i&&(i(),i=null)})})}const a=["onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage"];let l=null;function p(e){a.forEach(n=>{const o=e[n]||t;e[n]=function(e){h(n,e,this),o(e)}})}function h(e,t,n){const o=n.__hooks__[e];if(o&&o.length)for(let e=0;e<o.length;e++)o[e](t)}function d(e){var t;l=e,l.__hooks__={},t=l,["__hooks__"].forEach(e=>{Object.defineProperty(t,e,{enumerable:!1})}),a.forEach(e=>{l.__hooks__[e]=[]})}function b(e){return function(t){l.__hooks__[e].push(t)}}const x=b("onLoad"),y=b("onReady"),R=b("onShow"),g=b("onHide"),m=b("onUnload"),P=b("onPullDownRefresh"),j=b("onReachBottom"),w=b("onShareAppMessage");function O(e){e.active&&(!function(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}(e),e.options.onStop&&e.options.onStop(),e.active=!1)}function _(t){t&&n(t)||console.warn("watchEffect fn 应该是个函数"),t&&!n(t)&&(t=null);const o=e.effect(t);return()=>{O(o)}}const v=r=>{if(n(r.setup)){let s=r.onLoad||t;p(r),r.onLoad=function(t){d(this),function(t,r){const s=t.setup(r)||{},i={};u(s,(e,o)=>{n(e)?t[o]=e:i[o]=e}),function t(n,r,s){u(r,(u,i)=>{const f=s?s+"."+i:i;o(u)&&!e.isRef(u)&&t(n,u,f),e.effect(()=>{const t=r[i],o=(e.isRef(t),f),u=e.isRef(t)?e.unref(t):e.toRaw(t);c(n,{[o]:u})})})}(t,i)}(this,t),h("onLoad",t,this),s=s.bind(this),s(t)}}return Page(r)};Object.defineProperty(exports,"computed",{enumerable:!0,get:function(){return e.computed}}),Object.defineProperty(exports,"customRef",{enumerable:!0,get:function(){return e.customRef}}),Object.defineProperty(exports,"effect",{enumerable:!0,get:function(){return e.effect}}),Object.defineProperty(exports,"isProxy",{enumerable:!0,get:function(){return e.isProxy}}),Object.defineProperty(exports,"isReactive",{enumerable:!0,get:function(){return e.isReactive}}),Object.defineProperty(exports,"isReadonly",{enumerable:!0,get:function(){return e.isReadonly}}),Object.defineProperty(exports,"isRef",{enumerable:!0,get:function(){return e.isRef}}),Object.defineProperty(exports,"markRaw",{enumerable:!0,get:function(){return e.markRaw}}),Object.defineProperty(exports,"proxyRefs",{enumerable:!0,get:function(){return e.proxyRefs}}),Object.defineProperty(exports,"reactive",{enumerable:!0,get:function(){return e.reactive}}),Object.defineProperty(exports,"readonly",{enumerable:!0,get:function(){return e.readonly}}),Object.defineProperty(exports,"ref",{enumerable:!0,get:function(){return e.ref}}),Object.defineProperty(exports,"shallowReactive",{enumerable:!0,get:function(){return e.shallowReactive}}),Object.defineProperty(exports,"shallowReadonly",{enumerable:!0,get:function(){return e.shallowReadonly}}),Object.defineProperty(exports,"shallowRef",{enumerable:!0,get:function(){return e.shallowRef}}),Object.defineProperty(exports,"toRaw",{enumerable:!0,get:function(){return e.toRaw}}),Object.defineProperty(exports,"toRef",{enumerable:!0,get:function(){return e.toRef}}),Object.defineProperty(exports,"toRefs",{enumerable:!0,get:function(){return e.toRefs}}),Object.defineProperty(exports,"triggerRef",{enumerable:!0,get:function(){return e.triggerRef}}),Object.defineProperty(exports,"unref",{enumerable:!0,get:function(){return e.unref}}),exports.callHooks=h,exports.initHooks=d,exports.nextTick=e=>new Promise(t=>{i=()=>{e&&e(),t()}}),exports.onHide=g,exports.onLoad=x,exports.onPullDownRefresh=P,exports.onReachBottom=j,exports.onReady=y,exports.onShareAppMessage=w,exports.onShow=R,exports.onUnload=m,exports.resolveHooks=p,exports.setData=c,exports.stop=O,exports.watch=function(o,u){let s=r(o)?o.map(()=>{}):void 0;return _(()=>{const i=function(o){let u=t;e.isRef(o)?u=()=>o.value:n(o)?u=()=>o():r(o)&&(u=()=>o.map(t=>e.isRef(t)?t.value:n(t)?t():void 0));return u()}(o);i&&u(i,s),s=i})},exports.watchEffect=_,exports.wxue=v;

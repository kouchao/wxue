"use strict";function e(){}function t(e){return"object"==typeof e&&e.__isRef__}function n(e){return"object"==typeof e&&e.__isReactive__}function o(e,t){t.forEach(t=>{Object.defineProperty(e,t,{enumerable:!1})})}function s(e){return e&&"function"==typeof e}Object.defineProperty(exports,"__esModule",{value:!0});const r=new class{constructor(){this.queue=[]}push(e){this.queue.push(e)}run(e){for(;this.queue.length;)e(this.queue.shift())}isNull(){return 0===this.queue.length}};let u=null,i=null;function c(e,t){r.push(t),i&&(clearTimeout(i),i=null),i=setTimeout(()=>{if(r.isNull())return;let t={};r.run(e=>{t={...t,...e}}),e.setData(t,()=>{u&&(u(),u=null)})})}const _=["onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage"];let p=null;function a(e){_.forEach(t=>{const n=e[t];e[t]=function(e){f(t,e,this),n(e)}})}function f(e,t,n){const o=n.__hooks__[e];if(o&&o.length)for(let e=0;e<o.length;e++)o[e](t)}function h(e){p=e,p.__hooks__={},_.forEach(e=>{p.__hooks__[e]=[]})}function l(e){return function(t){p.__hooks__[e].push(t)}}const d=l("onLoad"),x=l("onReady"),w=l("onShow"),g=l("onHide"),v=l("onUnload"),R=l("onPullDownRefresh"),b=l("onReachBottom"),y=l("onShareAppMessage");let k=0;class m{constructor(){this.sub=[],this.uid=++k}append(e){this.sub.push(e),e.append(this)}depend(e){for(let n=0;n<this.sub.length;n++){this.sub[n].update(t(e)?e.value:e)}}remove(e){const t=this.sub.findIndex(t=>t===e);~t&&this.sub.splice(t,1)}}function P(e){if(n(e))return e;const t=new m;e.__dep__=t,e.__isReactive__=!0,o(e,["__dep__","__isReactive__"]);return new Proxy(e,{get(e,n){if(m.target){const e=m.target;t.append(e)}return e[n]},set:(e,n,o)=>(e[n]=o,t.depend(e),!0)})}function j(e){if(t(e))return e;return P({value:e,__isRef__:!0})}function H(e,t){const n=j(e[t]),o=new q(e=>{n.value=e[t]});return e.__dep__.append(o),n}m.activeFun=null;let S=0;class q{constructor(t){this.deps=[],this.uid=++S,this.fn=t||e}run(){m.target=this;const e=this.fn();return m.target=null,e}stop(){for(let e=0;e<this.deps.length;e++)this.deps[e].remove(this)}update(e){this.fn(e)}append(e){this.deps.push(e)}}function D(e){const t=new q(e);return t.run(),t.stop.bind(t)}const E=r=>{if(s(r.setup)){let s=r.onLoad||e;a(r),r.onLoad=function(e){const r=this,u=new Proxy(r.data,{get:(e,t)=>e[t],set(e,o,s){if(n(s)){const e=new q(e=>{c(r,{[o]:e})});s.__dep__.append(e)}return c(r,{[o]:t(s)?s.value:s}),!0}});r.data=u,h(r),r.__res__=r.setup(e)||{};for(const e in r.__res__){const t=r.__res__[e];"function"==typeof t?r[e]=t:r.data[e]=t}o(r,["__res__","__hooks__"]),s=s.bind(r),s(e)}}Page(r)};exports.Watcher=q,exports.callHooks=f,exports.computed=function(e){const t=j();return new q((function(){t.value=e()})).run(),t},exports.initHooks=h,exports.nextTick=e=>new Promise(t=>{u=()=>{e(),t()}}),exports.onHide=g,exports.onLoad=d,exports.onPullDownRefresh=R,exports.onReachBottom=b,exports.onReady=x,exports.onShareAppMessage=y,exports.onShow=w,exports.onUnload=v,exports.reactive=P,exports.ref=j,exports.resolveHooks=a,exports.setData=c,exports.toRef=H,exports.toRefs=function e(t,n={}){return Object.keys(t).forEach(o=>{"object"==typeof t[o]?n[o]=e(t[o],n):n[o]=H(t,o)}),n},exports.unref=function(e){return t(e)?e.value:e},exports.watch=function(e,t){let n;return D(o=>{const r=function(e){if(s(e))return e();return e.value}(e);o&&t(o,n),n=r})},exports.watchEffect=D,exports.wxue=E;
